webpackJsonp([6],{E7ag:function(t,e){},hWXV:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});n("XmAh");var r=n("il3B"),s=n("Xxa5"),a=n.n(s),i=n("exGp"),o=n.n(i),c=n("mvHQ"),u=n.n(c),l=n("bS7a"),p=n("k3x/"),v=n("vMJZ"),d={name:"ThirdParty",methods:{is_weixin:function(){return"micromessenger"==navigator.userAgent.toLowerCase().match(/MicroMessenger/i)},wechat:function(){this.is_weixin()?this.$wechat_href():window.location.href="weixin://"}}},h={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"third-party"},[e("div",{staticClass:"format"},[this._v("第三方登录")]),this._v(" "),e("div",{staticClass:"icon-wrapper"},[e("div",{staticClass:"icon left",on:{click:this.wechat}},[e("i",{staticClass:"icon-48-38-60-47 iconfont"})])])])},staticRenderFns:[]};var m=n("VU/8")(d,h,!1,function(t){n("j5kH")},"data-v-f46e0f74",null).exports,f=n("E4LH"),w={components:{ThirdParty:m},mixins:[l.a],data:function(){return{securityLevel:0,state:!1,openOverlay:!1,show:!0,count:"",timer:null,checked:!1,refresh:{b64s:"",id:""},loginForm:{phone:"",code:"",sidentify:""}}},watch:{},computed:{},methods:{getCode:function(t){var e=this;this.$reCaptcha(t,"smsCode").then(function(t){return u()({response:t})}).then(function(t){Object(v.c)(t).then(function(t){if(e.securityLevel=t.data.risk_level,!Object(f.d)(e.loginForm.phone))return e.$toast("请先填写手机号"),!1;t.data.risk_level>0?e.valideCode().then(function(t){if(!t.data.verify_status)return e.$toast("请先填写正确的图形码"),!1;e.sendText()}):e.sendText()})})},sendText:function(){var t=this,e=this;Object(p.b)(e.loginForm.phone).then(function(n){t.$toast.success("发送成功"),e.countdown()})},countdown:function(){var t=this;this.timer||(this.count=60,this.show=!1,this.timer=setInterval(function(){t.count>0&&t.count<=60?t.count--:(t.show=!0,clearInterval(t.timer),t.timer=null)},1e3))},valideCode:function(){var t=this;return o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.a)(u()({id:t.refresh.id,value:t.loginForm.sidentify}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,t)}))()},rules:function(){var t=this;return o()(a.a.mark(function e(){return a.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.checked){e.next=31;break}if(""===t.loginForm.phone){e.next=7;break}if(Object(f.d)(t.loginForm.phone)){e.next=5;break}return t.$toast("请填写正确手机号"),e.abrupt("return",!1);case 5:e.next=9;break;case 7:return t.$toast("手机号不能为空"),e.abrupt("return",!1);case 9:if(0===t.securityLevel){e.next=22;break}if(""===t.loginForm.sidentify){e.next=20;break}return e.next=13,t.valideCode();case 13:if(e.sent.data.verify_status){e.next=18;break}return t.refreshCode(),t.$toast("请填写正确的图形码"),e.abrupt("return",!1);case 18:e.next=22;break;case 20:return t.$toast("图形码不能为空"),e.abrupt("return",!1);case 22:if(""===t.loginForm.code){e.next=28;break}if(Object(f.e)(t.loginForm.code)){e.next=26;break}return t.$toast("请填写正确的验证码"),e.abrupt("return",!1);case 26:e.next=30;break;case 28:return t.$toast("验证码不能为空"),e.abrupt("return",!1);case 30:return e.abrupt("return",!0);case 31:return t.$toast("请阅读并勾选用户协议!"),e.abrupt("return",!1);case 33:case"end":return e.stop()}},e,t)}))()},open:function(){var t=this,e=this;r.a.confirm({title:"提示",message:"尊敬的用户您好，您未设置密码！",confirmButtonText:"设置密码",cancelButtonText:"下次设置"}).then(function(){e.$router.push({name:"pass",params:{phone:t.loginForm.phone}})}).catch(function(){e.$store.dispatch("getAgent_token").catch(function(t){e.router.push({name:"m_account"})})})},submitForm:function(t){var e=this;this.$reCaptcha(t,"textLogin"),this.rules().then(function(t){if(!t)return!1;var n=e;e.$store.dispatch("Login",e.loginForm).then(function(t){0===t&&n.open()}).catch(function(t){_this.$router.push({name:"m_account"})})})}}},_={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-wrapper"},[t._m(0),t._v(" "),n("form",{ref:"form-wrapper",staticClass:"form-wrapper",attrs:{action:""}},[n("div",{staticClass:"title"},[t._v("登录")]),t._v(" "),n("div",{staticClass:"input-wrapper"},[n("div",{staticClass:"text-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.phone,expression:"loginForm.phone"}],attrs:{type:"text",placeholder:"请输入手机号"},domProps:{value:t.loginForm.phone},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"phone",e.target.value)}}})])]),t._v(" "),t.securityLevel>0?n("div",{staticClass:"input-wrapper"},[n("div",{staticClass:"text-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.sidentify,expression:"loginForm.sidentify"}],attrs:{type:"text",placeholder:"请输入图形码的答案"},domProps:{value:t.loginForm.sidentify},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"sidentify",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"code",on:{click:t.refreshCode}},[n("van-image",{attrs:{width:"100%",height:"100%","lazy-load":"",src:t.refresh.b64s}})],1)]):t._e(),t._v(" "),n("div",{staticClass:"input-wrapper",staticStyle:{"margin-bottom":"0"}},[n("div",{staticClass:"text-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.loginForm.code,expression:"loginForm.code"}],attrs:{type:"text",placeholder:"请输入验证码"},domProps:{value:t.loginForm.code},on:{input:function(e){e.target.composing||t.$set(t.loginForm,"code",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"getValid"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],on:{click:t.getCode}},[t._v("发送验证码")]),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:!t.show,expression:"!show"}],staticClass:"count"},[t._v(t._s(t.count)+"s后重新发送")])])]),t._v(" "),n("div",{staticClass:"text_wrapper"},[t._v("未注册的手机号验证码后自动创建账户")]),t._v(" "),n("div",{staticClass:"submit-wrapper"},[n("button",{staticClass:"submit",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.submitForm(e)}}},[t._v("登录")])]),t._v(" "),n("div",{staticClass:"desc-wrapper"},[n("div",{staticClass:"left-wrapper"},[n("el-checkbox",{model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}}),t._v("我已阅读并接受\n        "),n("span",{staticClass:"yellow",on:{click:function(e){t.openOverlay=!0}}},[t._v("用户协议")]),t._v("\n        和\n        "),n("span",{staticClass:"yellow",on:{click:function(e){t.openOverlay=!0}}},[t._v("隐私政策")])],1),t._v(" "),n("router-link",{staticClass:"right-wrapper",attrs:{tag:"div",to:"user/password"}},[t._v("密码登录")])],1),t._v(" "),n("third-party")],1),t._v(" "),n("div",{staticClass:"footer"},[t._v("上海岐素信息科技有限公司")]),t._v(" "),n("van-overlay",{attrs:{show:t.openOverlay},on:{click:function(e){t.openOverlay=!1}}},[n("div",{staticClass:"wrapper"},[n("div",{staticClass:"block",on:{click:function(t){t.stopPropagation()}}},[n("div",{staticClass:"title-wrapper"},[t._v("《用户协议及隐私政策》")]),t._v(" "),n("div",{staticClass:"text-wrapper"},[n("p",[t._v("欢迎使用,我们非常重视您的个人信息和隐私保护，在使用之前，请务必仔细阅读用户协议及隐私政策，我们将严格按照经您同意的个项条款使用您的个人信息，以便为您提供更好的服务。")])])])])])],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"title-wrapper"})])}]};var g=n("VU/8")(w,_,!1,function(t){n("E7ag")},"data-v-32db94ce",null);e.default=g.exports},j5kH:function(t,e){}});
//# sourceMappingURL=6.db28e0706b1127f96e7a.js.map