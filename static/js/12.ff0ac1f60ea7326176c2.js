webpackJsonp([12],{IFMh:function(e,t){},l3Od:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=s("mvHQ"),r=s.n(o),i=s("k3x/"),n=s("bS7a"),a=s("E4LH"),l={mixins:[n.b,n.a],data:function(){var e=this;return{securityLevel:0,uuid:this.$route.params.uuid,disposable_code:this.$route.params.code,show:!0,count:"",state:!1,timer:null,refresh:{b64s:"",id:""},loginForm:{phone:"",code:"",smscode:""},rules:{phone:[{validator:function(e,t,s){""===t?s(new Error("请输入手机号")):Object(a.d)(t)?s():s(new Error("手机号不符合规则"))},trigger:"blur"}],code:[{validator:function(t,s,o){if(0!==e.securityLevel){if(!s)return o(new Error("图形验证码不能为空"));e.valideCode(s,o)}else o()},trigger:"blur"}],smscode:[{validator:function(e,t,s){""===t?s(new Error("请输入验证码")):Object(a.e)(t)?s():s(new Error("验证码不符合规则"))},trigger:"blur"}]}}},methods:{valideCode:function(e,t){var s=this;Object(i.a)(r()({id:this.refresh.id,value:this.loginForm.code})).then(function(e){if(!e.data.status)return t(new Error("图形验证码错误"));s.state=e.data.status,t()})},submitForm:function(e){var t=this;this.$reCaptcha(event,"bindPhone"),this.$refs[e].validate(function(e){if(e){var s=t;s.$store.dispatch("bind_phone",{tpl_id:t.uuid,disposable_code:t.disposable_code.toString(),phone_num:t.loginForm.phone,phone_code:t.loginForm.smscode}).then(function(e){e?s.$message({message:"设置成功!跳转中",type:"success"}):s.$message.error("token:undefind")}).catch(function(e){s.$router.push({name:"account"})})}})}},created:function(){this.$emit("customStyle",0)}},c={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bind-wrapper"},[s("div",{staticClass:"center_block"},[s("div",{staticClass:"content"},[e._m(0),e._v(" "),s("div",{staticClass:"body-wrapper"},[e._m(1),e._v(" "),s("el-form",{ref:"loginForm",staticClass:"demo-ruleForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.rules,"label-width":"100px"}},[s("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[s("el-input",{attrs:{type:"text",autocomplete:"off",placeholder:"输入手机号"},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone",t)},expression:"loginForm.phone"}})],1),e._v(" "),e.securityLevel>0?s("el-form-item",{attrs:{label:"图形验证码",prop:"code"}},[s("div",{staticClass:"item-wrapper"},[s("div",{staticClass:"el-input-wrapper"},[s("el-input",{attrs:{placeholder:"请输入答案"},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),e._v(" "),s("div",{staticClass:"login-code",staticStyle:{width:"120px",height:"40px",border:"1px solid #d7dae2","border-radius":"4px",overflow:"hidden","box-sizing":"border-box"},on:{click:e.refreshCode}},[s("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.refresh.b64s,lazy:""}})],1)])]):e._e(),e._v(" "),s("el-form-item",{staticClass:"smsCode-wrapper",attrs:{label:"短信验证码",prop:"smscode"}},[s("div",{staticClass:"item-wrapper"},[s("div",{staticClass:"el-input-wrapper"},[s("el-input",{attrs:{placeholder:"请输入短信验证码"},model:{value:e.loginForm.smscode,callback:function(t){e.$set(e.loginForm,"smscode",t)},expression:"loginForm.smscode"}})],1),e._v(" "),s("button",{class:e.show?"send-button block":"send-button_s block",attrs:{type:"button"}},[s("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],on:{click:e.getCode}},[e._v("发送验证码")]),e._v(" "),s("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+"s后重新发送")])])])]),e._v(" "),s("el-form-item",[s("div",{staticClass:"item-wrapper",staticStyle:{"justify-content":"center"}},[s("el-button",{attrs:{type:"warning"},on:{click:function(t){return e.submitForm("loginForm")}}},[e._v("确定")])],1)])],1)],1)])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title-wrapper"},[t("span",[this._v("账号安全")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"title"},[t("span",[this._v("绑定手机号")])])}]};var d=s("VU/8")(l,c,!1,function(e){s("IFMh")},"data-v-6034f536",null);t.default=d.exports}});
//# sourceMappingURL=12.ff0ac1f60ea7326176c2.js.map