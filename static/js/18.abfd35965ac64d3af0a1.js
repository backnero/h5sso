webpackJsonp([18],{Hnyy:function(e,t){},Vz3v:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=o("mvHQ"),a=o.n(s),r=o("//Fk"),i=o.n(r),n=o("bS7a"),l=o("E4LH"),c=o("k3x/"),m={name:"phoneForm",props:{},data:function(){var e=this;return{phoneForm:{sidentify:"",phone:""},refresh:{b64s:"",id:""},Rules:{phone:[{trigger:"blur",validator:function(e,t,o){Object(l.d)(t)?o():o(new Error("手机号不符合规则"))}}],sidentify:[{trigger:"blur",validator:function(t,o,s){if(!o)return s(new Error("图形验证码不能为空"));e.valideCode(o,s)}}]}}},watch:{},mixins:[n.a],methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.next()})},valideCode:function(e,t){var o=this;Object(c.a)(a()({id:this.refresh.id,value:this.phoneForm.sidentify})).then(function(e){if(!e.data.verify_status)return o.refreshCode(),t(new Error("图形验证码错误"));t()})},next:function(){this.$emit("next",{reset_phone:this.phoneForm.phone})}},created:function(){},mounted:function(){}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"phoneForm",staticClass:"demo-phoneForm",attrs:{model:e.phoneForm,rules:e.Rules,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"注册手机号:",prop:"phone"}},[o("el-input",{attrs:{type:"text",placeholder:"输入注册手机号",autocomplete:"off"},model:{value:e.phoneForm.phone,callback:function(t){e.$set(e.phoneForm,"phone",t)},expression:"phoneForm.phone"}})],1),e._v(" "),o("el-form-item",{staticClass:"sidentify-wrapper",attrs:{label:"图形验证码:",prop:"sidentify"}},[o("div",{staticClass:"item-wrapper",staticStyle:{width:"100%",display:"flex","justify-content":"space-between"}},[o("div",{staticClass:"el-input-wrapper",staticStyle:{width:"calc(100% - 150px)"}},[o("el-input",{attrs:{placeholder:"请输入图形验证码"},model:{value:e.phoneForm.sidentify,callback:function(t){e.$set(e.phoneForm,"sidentify",t)},expression:"phoneForm.sidentify"}})],1),e._v(" "),o("div",{staticClass:"login-code",staticStyle:{width:"120px",height:"40px",border:"1px solid #d7dae2","border-radius":"4px",overflow:"hidden","box-sizing":"border-box"},on:{click:e.refreshCode}},[o("el-image",{staticStyle:{width:"100%",height:"100%"},attrs:{src:e.refresh.b64s,lazy:""}})],1)])]),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"form-button",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("phoneForm")}}},[e._v("下一步")])],1)],1)},staticRenderFns:[]},u=o("VU/8")(m,p,!1,null,null,null).exports,d={name:"ArtificialForm",props:{},data:function(){return{artificialForm:{}}},watch:{},computed:{},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.next()})},next:function(){this.$emit("next")}},created:function(){},mounted:function(){}},f={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"artificialForm",staticClass:"demo-artificialForm",attrs:{model:e.artificialForm,"status-icon":"","label-width":"100px"}},[o("el-form-item",{staticStyle:{margin:"0"}},[o("span",{staticStyle:{"font-size":"13px","letter-spacing":"0px",color:"#eac385"}},[e._v("请填写以下信息，稍后我们会联系您")])]),e._v(" "),o("el-form-item",{attrs:{label:"账号:",prop:"account"}},[o("el-input",{attrs:{type:"text",placeholder:"输入手机号/邮箱/用户编号/用户名",autocomplete:"off"},model:{value:e.artificialForm.account,callback:function(t){e.$set(e.artificialForm,"account",t)},expression:"artificialForm.account"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"联系方式:",prop:"contact"}},[o("el-input",{attrs:{type:"password",placeholder:"输入您的联系方式",autocomplete:"off"},model:{value:e.artificialForm.contact,callback:function(t){e.$set(e.artificialForm,"contact",t)},expression:"artificialForm.contact"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图形验证码:",prop:"artificial_code"}},[o("el-input",{attrs:{type:"password",placeholder:"验证码",autocomplete:"off"},model:{value:e.artificialForm.artificial_code,callback:function(t){e.$set(e.artificialForm,"artificial_code",t)},expression:"artificialForm.artificial_code"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"form-button",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("artificialForm")}}},[e._v("提交")])],1)],1)},staticRenderFns:[]},h=o("VU/8")(d,f,!1,null,null,null).exports,v={components:{},props:{},data:function(){return{emailForm:{}}},watch:{},computed:{},methods:{submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.next()})},next:function(){this.$emit("next")}},created:function(){},mounted:function(){}},w={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"emailForm",staticClass:"demo-emailForm",attrs:{model:e.emailForm,"status-icon":"","label-width":"100px"}},[o("el-form-item",{attrs:{label:"邮箱:",prop:"email"}},[o("el-input",{attrs:{type:"text",placeholder:"输入邮箱",autocomplete:"off"},model:{value:e.emailForm.email,callback:function(t){e.$set(e.emailForm,"email",t)},expression:"emailForm.email"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"图形验证码:",prop:"email_code"}},[o("el-input",{attrs:{type:"password",placeholder:"验证码",autocomplete:"off"},model:{value:e.emailForm.email_code,callback:function(t){e.$set(e.emailForm,"email_code",t)},expression:"emailForm.email_code"}})],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"form-button",attrs:{type:"primary"},on:{click:function(t){return e.submitForm("emailForm")}}},[e._v("确认")])],1)],1)},staticRenderFns:[]},_=o("VU/8")(v,w,!1,null,null,null).exports,b={components:{},mixins:[n.b],props:{phone:{type:String,default:""}},data:function(){return{loginForm:{code:"",phone:""},Rules:{code:[{required:!0,trigger:"blur",validator:function(e,t,o){Object(l.e)(t)?o():o(new Error("验证码不符合规则"))}}]}}},watch:{phone:function(e,t){this.loginForm.phone=e}},methods:{validationPhone:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.next()})},next:function(){this.$emit("next",{reset_code:this.loginForm.code})}},created:function(){},mounted:function(){}},F={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"codeForm",staticClass:"demo-codeForm",attrs:{model:e.loginForm,"status-icon":"",rules:e.Rules}},[o("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[o("div",{staticClass:"divider-wrapper"},[o("div",{staticClass:"divider"}),e._v(" "),o("span",[e._v("请填写收到的短信验证码")])])]),e._v(" "),o("el-form-item",{staticClass:"smsCode-wrapper",attrs:{prop:"code"}},[o("div",{staticClass:"item-wrapper"},[o("div",{staticClass:"el-input-wrapper"},[o("el-input",{attrs:{placeholder:"请输入短信验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.submitForm("loginForm",t)}},model:{value:e.loginForm.code,callback:function(t){e.$set(e.loginForm,"code",t)},expression:"loginForm.code"}})],1),e._v(" "),o("button",{class:e.show?"send-button block":"send-button_s block",attrs:{type:"button"}},[o("span",{directives:[{name:"show",rawName:"v-show",value:e.show,expression:"show"}],on:{click:e.sendText}},[e._v("发送验证码")]),e._v(" "),o("span",{directives:[{name:"show",rawName:"v-show",value:!e.show,expression:"!show"}],staticClass:"count"},[e._v(e._s(e.count)+"s后重新发送")])])])]),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"form-button",attrs:{type:"primary"},on:{click:function(t){return e.validationPhone("codeForm")}}},[e._v("下一步")])],1)],1)},staticRenderFns:[]},x=o("VU/8")(b,F,!1,null,null,null).exports,y={components:{},props:{loadingState:{type:Boolean,default:!1}},data:function(){var e=this;return{pwdType:"password",checkPassType:"password",passwordForm:{pass:"",checkPass:""},Rules:{pass:[{validator:function(t,o,s){Object(l.c)(o)?(""!==e.passwordForm.checkPass&&e.$refs.passwordForm.validateField("checkPass"),s()):s(new Error("请输入至少6位"))},trigger:"blur"}],checkPass:[{validator:function(t,o,s){Object(l.c)(o)?o!==e.passwordForm.pass?s(new Error("两次输入密码不一致!")):s():s(new Error("请再次输入密码"))},trigger:"blur"}]}}},watch:{},computed:{},methods:{updatePassword:function(){var e=this;this.$refs.passwordForm.validate(function(t){t&&e.next()})},next:function(){this.$emit("next",{reset_password:this.passwordForm.pass})},showPwd:function(){var e=this;"password"===this.pwdType?this.pwdType="":this.pwdType="password",this.$nextTick(function(){e.$refs.pass.focus()})},showcheckPass:function(){var e=this;"password"===this.checkPassType?this.checkPassType="":this.checkPassType="password",this.$nextTick(function(){e.$refs.checkPass.focus()})}},created:function(){},mounted:function(){}},g={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("el-form",{ref:"passwordForm",staticClass:"demo-passwordForm",attrs:{model:e.passwordForm,rules:e.Rules,"label-width":"100px"}},[o("el-form-item",{attrs:{label:"密码：",prop:"pass"}},[o("el-input",{ref:"pass",attrs:{type:e.pwdType,placeholder:"请设定登录密码",autocomplete:"off"},model:{value:e.passwordForm.pass,callback:function(t){e.$set(e.passwordForm,"pass",t)},expression:"passwordForm.pass"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[o("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),o("el-form-item",{staticStyle:{"margin-bottom":"35px"},attrs:{label:"确认密码：",prop:"checkPass"}},[o("el-input",{ref:"checkPass",attrs:{type:e.checkPassType,placeholder:"请再输入一次登录密码",autocomplete:"off"},model:{value:e.passwordForm.checkPass,callback:function(t){e.$set(e.passwordForm,"checkPass",t)},expression:"passwordForm.checkPass"}}),e._v(" "),o("span",{staticClass:"show-pwd",on:{click:e.showcheckPass}},[o("svg-icon",{attrs:{"icon-class":"eye"}})],1)],1),e._v(" "),o("el-form-item",[o("el-button",{staticClass:"form-button",attrs:{type:"primary",loading:e.loadingState},on:{click:e.updatePassword}},[e._v("下一步")])],1)],1)},staticRenderFns:[]},k=o("VU/8")(y,g,!1,null,null,null).exports,C=o("vMJZ"),S={components:{PhoneForm:u,ArtificialForm:h,EmailForm:_,CodeForm:x,PasswordForm:k},mixins:[n.d],data:function(){return{options:[{value:"1",label:"手机号找回"}],phone:"",loadingState:!1,state_switch:"1",success:!1,ruleForm:{phone:"",phone_code:"",account:"",contact:"",Artificial_code:"",email:"",email_code:""},activeName:localStorage.getItem("reset_index")||"1",state:!1,rules:{}}},methods:{removeLocalStorage:function(){localStorage.removeItem("reset_index"),localStorage.removeItem("reset_phone"),localStorage.removeItem("reset_code"),localStorage.removeItem("reset_password"),this.$router.go(-1)},open:function(){var e=this;this.$confirm("是否放弃此次操作?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.removeLocalStorage()}).catch(function(){e.$message({type:"info",message:"已取消"})})},moreState:function(e,t){var o=this;return new i.a(function(e,t){o.state&&(o.state=!1,e()),t()})},next:function(e){var t=this;for(var o in e){var s=a()(e);localStorage.setItem(o,s),"reset_phone"===o&&(this.phone=e[o])}var r=Number(this.activeName);3!==r?(r++,this.activeName=r.toString(),this.state=!0):(this.loadingState=!0,Object(C.g)({phone_num:JSON.parse(localStorage.getItem("reset_phone")).reset_phone,password:this.encryption(JSON.parse(localStorage.getItem("reset_password")).reset_password),code:JSON.parse(localStorage.getItem("reset_code")).reset_code}).then(function(e){console.log(e),1===e.status_code&&(t.success=!0,t.loadingState=!1,r++,t.activeName=r.toString(),t.state=!0)})),r<4&&localStorage.setItem("reset_index",this.activeName)},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.next()})},initIndex:function(){}},created:function(){this.$emit("customStyle",0)}},$={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"retrieve-wrapper"},[o("div",{staticClass:"main-wrapper"},[o("div",{staticClass:"close"},[o("i",{staticClass:"el-icon-close",on:{click:e.open}})]),e._v(" "),o("el-tabs",{attrs:{"before-leave":e.moreState,stretch:!0},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[o("el-tab-pane",{attrs:{label:"1.填写账号",name:"1"}},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,"status-icon":"","label-width":"100px"}},[o("el-form-item",{class:{item_el:"2"==e.state_switch}},[o("el-select",{attrs:{placeholder:"请选择"},model:{value:e.state_switch,callback:function(t){e.state_switch=t},expression:"state_switch"}},e._l(e.options,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}),1)],1),e._v(" "),o("phone-form",{directives:[{name:"show",rawName:"v-show",value:1==e.state_switch,expression:"state_switch==1"}],on:{next:e.next}}),e._v(" "),o("artificial-form",{directives:[{name:"show",rawName:"v-show",value:2==e.state_switch,expression:"state_switch==2"}],on:{next:e.next}}),e._v(" "),o("email-form",{directives:[{name:"show",rawName:"v-show",value:3==e.state_switch,expression:"state_switch==3"}],on:{next:e.next}})],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"2.验证",name:"2"}},[o("code-form",{attrs:{phone:e.phone},on:{next:e.next}})],1),e._v(" "),o("el-tab-pane",{attrs:{label:"3.重置密码",name:"3"}},[o("password-form",{attrs:{loadingState:e.loadingState},on:{next:e.next}})],1),e._v(" "),o("el-tab-pane",{attrs:{label:"4.设置完成",name:"4"}},[o("div",{staticClass:"success_wrapper"},[o("div",{staticClass:"text-wrpper"},[o("div",{staticClass:"icon-wrapper"},[e.success?o("i",{staticClass:"el-icon-success i_success"}):o("i",{staticClass:"el-icon-error i_err"})]),e._v(" "),e.success?o("div",{staticClass:"text"},[e._v("您的密码已设置成功")]):o("div",{staticClass:"text"},[e._v("很遗憾，密码重置失败")])]),e._v(" "),o("el-button",{staticClass:"form-button",attrs:{type:"primary"},on:{click:e.removeLocalStorage}},[e._v("返回")])],1)])],1)],1)])},staticRenderFns:[]};var P=o("VU/8")(S,$,!1,function(e){o("Hnyy")},"data-v-3e88110f",null);t.default=P.exports}});
//# sourceMappingURL=18.abfd35965ac64d3af0a1.js.map